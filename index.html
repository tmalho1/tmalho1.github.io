<!DOCTYPE html>
<html><head>  <meta charset="UTF-8">
        <title>students</title>
</head>
<body style='margin-left: 30px;'>

    <h1>Select a Major</h1>
        
    <button type='button' class="btn btn-primary" onClick="getData('CIT)">CIT Majors</button>
<button type='button' class="btn btn-primary" onClick="getData('BUS')">Business Majors</button>
             
 	<div id="result"></div>
    
    <h3> We filter our dataset by major </h3>

<script>
   
    document.addEventListener('DOMContentLoaded', function() {      // when page has loaded, more or less
													  
    	function getData(majors) {      // called when a button is clicked. paramter selected_meal = breakfast, lunch, or dinner
      var request = new XMLHttpRequest();
      request.open('GET', 'cit5students.json');      // open Ajax request for data file menu_items.json
 
      request.onload = function() {                     // when the data comes back, browser calls this function
         var data = JSON.parse(request.responseText);    // convert json to javascript array of objects

         cit5students = data.filter(getMajor)       // meal_itmes array will contain the filtered data using the getMeal() function
         function getMajor(item) {
            return item.major == cit5students;   // the new meal_items array will contain only items for the selected meal
         }
        
        if (request.status == 200) {    // if all is well as data returns, then compile and populate the template
            var templateText = document.getElementById('tableTemplate').innerHTML;
            var compiledTemplateText = Handlebars.compile(templateText);       
            compiledHtml = compiledTemplateText({ rows: cit5students })          
            document.getElementById('menuTable').innerHTML = compiledHtml; 
        }
        else {
            document.querySelector('#menuTable').innerHTML = "There was an error, or menu items not found";
        }
     }
     
     request.send(null);
  }
   
</script>
</body>
</html>
